<html ondragover="drag_over(event)" ondrop="drop(event)">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aeki Notes</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/8.2.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/8.2.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-database.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-firestore.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-functions.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-storage.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-analytics.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-remote-config.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-performance.js"></script>
    <script defer src="/__/firebase/8.2.1/firebase-firestore.js"></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/base_template.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="includes/logo-trans.png">

    <script src="app.js"></script>

    <script type="text/javascript">
        function add_note(id, x, y) {
            //get main element, id = "board"
            var board = document.getElementById("board");

            //create div col
            var col = document.createElement("div");
            col.classList.add("col");
            col.id = `card_${id}`;
            col.draggable = true;
            col.addEventListener("dragstart", function () { drag_start(event) });
            col.style = `opacity: 0; left: ${x}px; top: ${y}px;`;

            //create div card > col
            var card = document.createElement("div");
            card.classList.add("card");

            col.appendChild(card);

            //create div top_bar > card
            var top_bar = document.createElement("div")
            top_bar.classList.add("top_bar");

            card.appendChild(top_bar);

            //create input > top_bar
            var input = document.createElement("input")
            input.id = `title_${id}`;
            input.type = "text";

            top_bar.appendChild(input);

            //create img > top_bar
            var img = document.createElement("img");
            img.id = `close_${id}`;
            img.classList.add("close_img");
            img.src = "https://icons.iconarchive.com/icons/custom-icon-design/mono-general-1/512/close-icon.png";
            img.addEventListener('click', function () { setTimeout(close_note(this), 3000); });

            top_bar.appendChild(img);

            //create textarea > card
            var textarea = document.createElement("textarea");
            textarea.id = `content__${id}`;
            textarea.classList.add("content");

            card.appendChild(textarea);

            //log new card to console
            console.log(col);

            //append new card to "board"
            board.appendChild(col);

            //show new card
            setTimeout(clear => document.getElementById(`card_${id}`).style.opacity = "1", 100);

            // <div class="col" id="card_1" draggable="true" ondragstart="drag_start(event)" style="left: 862px; top: 630px;">
            //     <div class="card">
            //         <div class="top_bar">
            //             <input id="title_1" type="text">
            //             <img src="https://icons.iconarchive.com/icons/custom-icon-design/mono-general-1/512/close-icon.png" onclick="setTimeout(delete_note(this), 3000);">
            //         </div>
            //         <textarea id="content_1" class="content"></textarea>
            //     </div>
            // </div>

        }

        function close_note(note) {
            parentNote = note.parentElement.parentElement.parentElement;
            console.log(parentNote);
            parentNote.style.opacity = "0";
            setTimeout(clear => parentNote.parentNode.removeChild(parentNote), 250);

        }

        function closeAll() {
            var cards = document.getElementsByClassName("col");
            console.log(cards);
            var i = 1;
            for (let card of cards) {
                setTimeout(() => {
                    cards[0].parentNode.removeChild(cards[0]);
                }, i);
                i += 1;
            }
            setTimeout(() => {
                for (let i = 0; i < 10; i++) {
                    add_note(i, i * 50 + 50, i * 50 + 100);
                }
            }, 1000);
        }
    </script>

    <style>
        /* header */
        header {
            position: fixed;
            background-color: var(--cust-secondary);
            color: var(--cust-white);
            z-index: 1;
            height: 3.5rem;
            width: 100%;
            top: 0;
            font-size: 1.2em;

            box-shadow: none;
        }

        .nav {
            position: relative;
            height: 100%;
            /*display: table;*/
        }

        .nav-item,
        .nav-item a,
        .nav-item button,
        #welcomeMsg {
            color: var(--cust-white);
            font-size: 1rem;
            position: relative;
            /*display: table-cell;*/
            display: flex;
            align-items: center;
            /*vertical-align: middle;*/
            border: none;
            outline: none;
            border-width: 0;

            transition: background-color 0.25s ease-in-out;
        }

        .nav-link {
            height: 100%;
        }

        .nav-item:hover,
        .nav-item:hover a,
        .nav-item:hover button {
            color: var(--cust-secondary);
            background-color: var(--cust-offwhite);
        }

        #welcomeMsg {
            position: relative;
            padding-left: 2.5rem;
            font-weight: 1000;
            align-items: center;
        }

        .login {
            display: block;
        }

        .navImg {

            position: absolute;
            z-index: 2;
            left: 0;
            top: 0;

            height: 3.5rem;
            filter: grayscale(1) brightness(.5);
            transition: filter 0.25s ease-in-out;

        }

        .nav-item:hover .navImg {
            filter: grayscale(0) brightness(1);
        }

        .nav-title {
            display: block;
            height: 3.5rem;
            line-height: 3.5rem;
            width: 5rem;
            text-decoration: none;
            text-align: center;
            background-color: var(--cust-secondary);
            outline: none;

        }

        .nav-title:hover {
            text-decoration: none;
            background-color: var(--cust-offwhite);
        }

        .nav-title,
        .dropbtn {
            transition: background-color 0.25s ease-in-out;
        }

        .modal-backdrop {
            z-index: 0;
        }

        .dropbtn {
            color: var(--cust-white);
            padding: 5px;
            font-size: 16px;
            border: none;

        }

        .dropdown:hover,
        .dropdown:hover .dropbtn {
            color: var(--cust-secondary);
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            top: 3.5rem;
            right: -150px;
            display: block;
            /*                visibility: hidden;
          opacity: 0;*/
            position: absolute;
            padding: 10px;
            background-color: #f1f1f1;
            width: 150px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .dropdown-content a,
        .dropdown-content button {
            color: black;
            text-decoration: none;
            display: block;
            font-size: 15px;
            width: 100%;
            border: none;
            outline: none;
        }

        .dropdown-content a:hover,
        .dropdown-content button:hover {
            background-color: #ddd;
        }

        .dropdown:hover .dropdown-content {
            /*                visibility: visible;
          opacity: 1;*/
            right: 0;
        }

        .dropdown-content {
            transition: right 0.25s ease-in-out;
            ;
        }

        /* Main */

        .col {
            position: absolute;
            height: 22rem;
            width: 18rem;
            transition: opacity .25s ease-in-out;
        }

        .card {
            position: absolute;
            height: 22rem;
            width: 18rem;
            margin: 0;
            padding: 0.5rem;
            color: var(--cust-grey);
            background-color: var(--cust-note);

            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: 0px;
        }

        .top_bar {
            position: relative;
            border-bottom: 1px solid #555;
            height: 1.5rem;
            line-height: 1.5rem;
            background-color: var(--cust-note);
        }

        .top_bar img {
            position: absolute;
            height: 1.25rem;
            right: 0.125px;
            top: 0.125px;

        }

        .card .content,
        .card input {
            height: 100%;
            padding: .5rem 1rem;
            padding-top: 0;
            text-align: left;
            resize: none;
            overflow-y: auto;

            border: none;
            outline: none;
            background-color: var(--cust-note);
        }

        .card .content {
            margin-top: .5rem;
            padding-top: 0;
        }

        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #ce9720;
        }

        ::-webkit-scrollbar-thumb {
            background: #555;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #333;
        }

        html ::-webkit-scrollbar-track {
            background: var(--cust-grey);
        }

        html ::-webkit-scrollbar-thumb {
            background: #fff;
        }

        html ::-webkit-scrollbar-thumb:hover {
            background: #bdbdbd;
        }

        html ::-webkit-scrollbar-corner {
            background: var(--cust-grey);
        }

        /* footer */
        footer {
            height: 2rem;
            position: fixed;
            Width: 100%;
            bottom: 0;
            padding: .25rem 1rem;
            background-color: #222;
            color: var(--cust-white);
            font-size: 1em;
        }
    </style>
</head>

<body>

    <header class=" mb-0 mt-0 mx-0 clearfix">
        <ul class="nav" style="float: left;">

            <li class="nav-item" style="vertical-align: baseline;">
                <a href="index.html" class="font-weight-bold nav-link"
                    style="font-size: 1.5rem; padding-left: 5rem; padding-right: 3.5rem; width: 10rem;">
                    <img class="navImg" src='includes/logo-trans.png' />
                    AEKI
                </a>
            </li>
            <span id="welcomeMsg">
                Welcome!
            </span>

        </ul>

        <div style="float: right;">

            <div id="options" class="dropdown nav-title" style="display: none;">
                <a class="dropbtn">

                    <i class="fa fa-align-justify" style="font-size:20px;margin-top:15px"></i>
                </a>
                <div class="dropdown-content">
                    <button onclick="logout()">Logout</button>
                </div>
            </div>

            <!-- <button id="loginBtn" onclick="closeAll()" class="nav-title float-right nav-item"
                style="border: none; outline:none;">Login</button> -->
            <!-- <button id="loginBtn" onclick="add_note(54,50,50)" class="nav-title float-right nav-item"
                style="display: none; border: none; outline:none;">Login</button> -->
            <button id="loginBtn" onclick="googleLogin()" class="nav-title float-right nav-item"
                style="display: none; border: none; outline:none;">Login</button>

        </div>

    </header>




    <div class="main_container d-flex flex-column">

        <main id="board" class="h-auto w-auto">


        </main>
    </div>
    <!--     
    <footer class="text-center mt-0 mx-0 mb-0">
    © 2020, Aeki.com, Inc. or its affiliates
    </footer>
    -->
</body>

</html>